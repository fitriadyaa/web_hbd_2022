{"mappings":"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","sources":["src/js/ext/setPage.js","src/js/pages.js","src/js/ext/openDate.js","src/js/animation.js","src/js/index.js"],"sourcesContent":["export default function (page) {\n  document.title = page.title;\n  document.body.innerHTML = page.body;\n  document.body.classList.add(\"page-404\");\n}\n","export const soon = {\n  title: \"Come Back Later...\",\n  body: `<br />\n    <h1>Hi, you come to early</h1>\n    <br /><br /><br />\n    <p>\n        I know this page is very interesting for you, especially for your special day but.<br />\n        You need to be patience until the time has come, right ?\n    </p>`,\n};\n\nexport const late = {\n  title: \"See you next time...\",\n  body: `<br />\n    <h1>The party was over</h1>\n    <br /><br /><br />\n    <p>\n        Yes, my gift for you is kinda simple, cheap, and weird ? &#128534<br>\n        B-but. It's only for you. &#128150\n    </p>\n`,\n};\n","export const isBDay = function () {\n  const startTime = new Date(process.env.OPEN_DATE + \"T00:00\").getTime();\n  const endTime = startTime + 24 * 60 * 60 * 1000;\n  const localTime = Date.now();\n  if (localTime < startTime) return \"IS_EARLY\";\n  if (localTime > endTime) return \"IS_LATE\";\n  return \"ON_TIME\";\n};\n","//jshint esversion:6\n\nconst button = document.querySelector(\".btn\"),\n  darkroom = document.querySelector(\".darkroom\"),\n  giftroom = document.querySelector(\".giftroom\"),\n  hallway = document.querySelector(\".hallway\"),\n  room = document.querySelector(\".empty-room\"),\n  flash = document.querySelector(\".flash\");\n\n// These are the text elements that hold messages to be displayed in the respective screes\n\nconst blackText = document.querySelectorAll(\".bb-text\"), // msgs in the dark room scene\n  giftText = document.querySelectorAll(\".gift-text\"), // msgs in the gift scene\n  hallText = document.querySelectorAll(\".hall-text\"), // msgs in the hallway scene\n  roomText = document.querySelectorAll(\".room-text\"), // msgs in empty room scene\n  CTAtext = document.querySelector(\".btn-ref\");\n\n//Elements in the card page\n\nconst frames = document.querySelectorAll(\".frame\"),\n  msgWindow = document.querySelector(\".scroll\"), // this one has the message frame in [0] and card fram in [1]\n  msg = document.querySelector(\".text\"); // the Message para\n\n//Sfx files\n\nconst light = document.querySelector(\".switch-aud\"),\n  blast = document.querySelector(\".blast-aud\"),\n  door = document.querySelector(\".door-aud\"),\n  haunt = document.querySelector(\".haunt-aud\"),\n  music = document.querySelector(\".hbd-aud\");\n\n//  readMsg() displays the paras in each scene successively. It takes an array of the para elements as input.\n\nconst readMsg = (text) => {\n  for (let i = 0; i < text.length; i++) {\n    // this loop goes through all the text msg paras\n    setTimeout(() => {\n      // A timeout of 5s ia applied to all text elements so that appear successively one after the other\n      text[i].classList.add(\"read\"); // this adds a fadeIn-fadeOut animation to elements\n      if (i === text.length - 1) {\n        // this ensures that the button appears only after the last text is displayed.\n        button.style.display = \"inline-block\";\n        CTAtext.style.display = \"block\";\n      }\n    }, 5000 * i);\n  }\n};\n\n// transition() is animation for change from one scene to another. It takes the current scene div element as input.\n\nconst transition = (currentScene) => {\n  currentScene.classList.add(\"fade-in\");\n  currentScene.style.opacity = \"0\";\n  button.style.display = \"none\";\n  CTAtext.style.display = \"none\";\n};\n\n//Animation Code\n\n/*\n    In the beginning, the black page appears signifying a dark room and after displaying the msg paras\n    one by one, a button(bulb) appears and the user is asked to click the button to swith on the lights.\n*/\n\nexport const animate = function () {\n  CTAtext.innerHTML = \"Click the Light Bulb.\";\n\n  readMsg(blackText);\n\n  button.addEventListener(\"click\", function () {\n    if (button.classList.contains(\"switch\")) {\n      /* \n              When the switch is pressed, the black div will wipe out and the backgroung scene with no \n              elements will appear, signifying that the lights are turned on and the room is empty. Then \n              the msg will be displayed after which, the user will be asked to move out and the button with\n              door icon will appear. \n          */\n\n      light.play();\n      transition(darkroom);\n      CTAtext.innerHTML = \"Click the Door\";\n      setTimeout(function () {\n        button.classList.add(\"door-out\");\n        button.classList.remove(\"switch\");\n        darkroom.style.display = \"none\";\n        readMsg(roomText);\n      }, 4000);\n    } else if (button.classList.contains(\"door-out\")) {\n      /* \n              when the door is pressed, scene changes to cemetry. Again, the msg will be displayed, after \n              which, the user will be asked to come inside and the button with door will appear again.\n          */\n\n      door.play();\n      transition(room);\n      setTimeout(function () {\n        haunt.play();\n        haunt.loop = true;\n        button.classList.add(\"door-in\");\n        button.classList.remove(\"door-out\");\n        room.style.display = \"none\";\n        readMsg(hallText);\n      }, 4000);\n    } else if (button.classList.contains(\"door-in\")) {\n      /* \n              when the door is pressed, scene changes to the gift room. Again, the msg will be displayed, after \n              which, the user will be asked to open the gift and the button with gift will appear.\n          */\n\n      door.play();\n      transition(hallway);\n      CTAtext.innerHTML = \"Click the Gift\";\n      setTimeout(function () {\n        button.classList.add(\"gift\");\n        button.classList.remove(\"door-in\");\n        hallway.style.display = \"none\";\n        readMsg(giftText);\n      }, 4000);\n    } else if (button.classList.contains(\"gift\")) {\n      /* \n              when the gift is pressed, the gift scene vanishes and the white div fades slowly giving a sense \n              of explosion. After that, the message frame appears and moves up until the message completes. Then,\n              the message frame fades away and the card appears.\n          */\n\n      haunt.pause();\n      blast.play();\n      giftroom.style.display = \"none\";\n      transition(flash);\n\n      music.loop = true;\n      music.play();\n\n      if (!process.env.SCROLL_MSG) {\n        frames[0].style.display = \"flex\";\n        setTimeout(() => {\n          frames[0].classList.add(\"appear\");\n          frames[0].style.opacity = \"1\";\n        }, 1500);\n        return;\n      }\n\n      //This value is stored in the --readTime css variable of root element and is calculated dynamically at build time.\n      const readTime =\n        parseInt(\n          getComputedStyle(document.documentElement).getPropertyValue(\n            \"--readTime\"\n          )\n        ) + 5;\n\n      frames[1].style.display = \"flex\";\n\n      setTimeout(() => {\n        frames[1].classList.add(\"appear\");\n        frames[1].style.opacity = \"1\";\n        msg.classList.add(\"move-up\");\n      }, 1500);\n\n      setTimeout(() => {\n        msg.style.transform = \"translateY(-100%)\";\n        flash.style.display = \"none\";\n      }, 5000);\n\n      setTimeout(() => {\n        msgWindow.classList.add(\"fade-in\");\n        msgWindow.style.opacity = \"0\";\n      }, readTime * 1000);\n\n      setTimeout(() => {\n        frames[1].style.display = \"none\";\n        frames[0].style.display = \"flex\";\n        frames[0].classList.add(\"appear\");\n        frames[0].style.opacity = \"1\";\n      }, (readTime + 3) * 1000);\n    }\n  });\n};\n","//jshint esversion:8\n\nimport { isBDay } from \"./ext/openDate.js\";\nimport setPage from \"./ext/setPage.js\";\nimport { late, soon } from \"./pages.js\";\nimport { animate } from \"./animation.js\";\n\n/******************************************************* SETUP ************************************************************/\n\nif (process.env.OPEN_DATE) {\n  const status = isBDay();\n  if (status === \"IS_EARLY\") setPage(soon);\n  if (status === \"IS_LATE\") setPage(late);\n  if (status === \"ON_TIME\") animate();\n} else {\n  animate();\n}\n"],"names":["$c24d5d6cfd5bd7eb$export$2e2bcd8739ae039","page","document","title","body","innerHTML","classList","add","startTime","endTime","localTime","$97a35312c026a022$var$button","querySelector","$97a35312c026a022$var$darkroom","$97a35312c026a022$var$giftroom","$97a35312c026a022$var$hallway","$97a35312c026a022$var$room","$97a35312c026a022$var$flash","$97a35312c026a022$var$blackText","querySelectorAll","$97a35312c026a022$var$giftText","$97a35312c026a022$var$hallText","$97a35312c026a022$var$roomText","$97a35312c026a022$var$CTAtext","$97a35312c026a022$var$frames","$97a35312c026a022$var$msgWindow","$97a35312c026a022$var$msg","$97a35312c026a022$var$light","$97a35312c026a022$var$blast","$97a35312c026a022$var$door","$97a35312c026a022$var$haunt","$97a35312c026a022$var$music","$97a35312c026a022$var$readMsg","text","setTimeout","i","length","style","display","i1","_loop","$97a35312c026a022$var$transition","currentScene","opacity","$1c522d1cae7ac7ae$var$status","Date","getTime","now","addEventListener","contains","play","remove","loop","pause","readTime","parseInt","getComputedStyle","documentElement","getPropertyValue","transform"],"version":3,"file":"index.5408bf6d.js.map"}